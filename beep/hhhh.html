const http = require("http"); const fs = require("fs"); let url = require("url"); const server = http.createServer((req, res) => { console.log(req.url); let abc = url.parse(req.url, true); if (req.url == "/signup" || req.url == "/signup.html") { fs.readFile(__dirname
+ "/sign.html", "utf-8", (err, data) => { if (err) { res.write("Not Available"); } else { res.writeHead(302, { 'Content-type': 'text/html' }); res.write(data); } res.end(); }) } else if (req.url == "/login" || req.url == "/login.html") { fs.readFile(__dirname
+ "/login.html", "utf-8", (err, data) => { if (err) { res.write("Not Available"); res.end(); } else { res.writeHead(302, { 'Content-type': 'text/html' }); res.write(data); res.end(); } }) } else if (abc.pathname == "/product" || abc.pathname == "/product.json")
{ console.log(abc.query.username); fs.readFile(__dirname + "/product.json", "utf-8", (err, data) => { if (err) { res.write("Not Available"); res.end(); } else { res.write(data); fs.writeFile("user.json",{ username : abc.query.username, password : abc.query.password
} , { encoding: "utf8", flag: "w", mode: 0o666 }, (err) => { if (err) console.log(err); else { console.log("File written successfully\n"); console.log("The written has the following contents:"); console.log(fs.readFileSync("user.json", "utf8")); } });
res.end(); } }) } else { res.write("
<h1>Unknown</h1>"); res.end(); } }) server.listen(3000, (error) => { if (error) { console.log(error); } else { console.log("Server is running at port 3000"); } })